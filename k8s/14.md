# Lab 14

- Alertmanager: Routes and manages alerts.
- Prometheus: Collects, stores, and queries metrics.
- Grafana: Visualizes data and creates dashboards.
- Prometheus Node Exporter: Gathers system-level metrics.
- Kube State Metrics: Collects Kubernetes-specific metrics.
- Kube Prometheus Stack Operator: Manages stack lifecycle.
- Custom Resources (ConfigMap): Stores configuration data for components.

```
yaroslav@xiaomao ~/S/D/d/k8s (lab13)> kubectl get po,sts,svc,pvc,cm
NAME                                                       READY   STATUS             RESTARTS      AGE
pod/alertmanager-v1-kube-prometheus-stack-alertmanager-0   2/2     Running            0             4m19s
pod/app-python-0                                           0/1     CrashLoopBackOff   8 (73s ago)   17m
pod/app-python-1                                           0/1     CrashLoopBackOff   8 (58s ago)   17m
pod/prometheus-v1-kube-prometheus-stack-prometheus-0       2/2     Running            0             4m19s
pod/v1-grafana-ff86bb7c4-h294c                             3/3     Running            0             5m
pod/v1-kube-prometheus-stack-operator-6f7547d8d4-z7skw     1/1     Running            0             5m
pod/v1-kube-state-metrics-74b67b69c8-4h64h                 1/1     Running            0             5m
pod/v1-prometheus-node-exporter-l7drt                      1/1     Running            0             5m

NAME                                                                  READY   AGE
statefulset.apps/alertmanager-v1-kube-prometheus-stack-alertmanager   1/1     4m19s
statefulset.apps/app-python                                           0/2     17m
statefulset.apps/prometheus-v1-kube-prometheus-stack-prometheus       1/1     4m19s

NAME                                            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE
service/alertmanager-operated                   ClusterIP   None             <none>        9093/TCP,9094/TCP,9094/UDP   4m19s
service/app-python                              NodePort    10.108.76.12     <none>        80:30456/TCP                 6d23h
service/kubernetes                              ClusterIP   10.96.0.1        <none>        443/TCP                      37d
service/prometheus-operated                     ClusterIP   None             <none>        9090/TCP                     4m19s
service/v1-grafana                              ClusterIP   10.109.176.203   <none>        80/TCP                       5m
service/v1-kube-prometheus-stack-alertmanager   ClusterIP   10.102.194.210   <none>        9093/TCP,8080/TCP            5m
service/v1-kube-prometheus-stack-operator       ClusterIP   10.107.250.11    <none>        443/TCP                      5m
service/v1-kube-prometheus-stack-prometheus     ClusterIP   10.107.65.54     <none>        9090/TCP,8080/TCP            5m
service/v1-kube-state-metrics                   ClusterIP   10.107.9.242     <none>        8080/TCP                     5m
service/v1-prometheus-node-exporter             ClusterIP   10.107.217.153   <none>        9100/TCP                     5m

NAME                                      STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/data-app-python-0   Bound    pvc-f6fca879-f28b-4245-bd5d-c556e6b82292   1Gi        RWO            standard       7d1h
persistentvolumeclaim/data-app-python-1   Bound    pvc-9dee018d-6f7f-43bb-8b05-6b4ee4dc0b0b   1Gi        RWO            standard       7d1h

NAME                                                                   DATA   AGE
configmap/config                                                       1      17m
configmap/kube-root-ca.crt                                             1      37d
configmap/prometheus-v1-kube-prometheus-stack-prometheus-rulefiles-0   35     4m19s
configmap/v1-grafana                                                   1      5m
configmap/v1-grafana-config-dashboards                                 1      5m
configmap/v1-kube-prometheus-stack-alertmanager-overview               1      5m
configmap/v1-kube-prometheus-stack-apiserver                           1      5m
configmap/v1-kube-prometheus-stack-cluster-total                       1      5m
configmap/v1-kube-prometheus-stack-controller-manager                  1      5m
configmap/v1-kube-prometheus-stack-etcd                                1      5m
configmap/v1-kube-prometheus-stack-grafana-datasource                  1      5m
configmap/v1-kube-prometheus-stack-grafana-overview                    1      5m
configmap/v1-kube-prometheus-stack-k8s-coredns                         1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-cluster               1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-multicluster          1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-namespace             1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-node                  1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-pod                   1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-workload              1      5m
configmap/v1-kube-prometheus-stack-k8s-resources-workloads-namespace   1      5m
configmap/v1-kube-prometheus-stack-kubelet                             1      5m
configmap/v1-kube-prometheus-stack-namespace-by-pod                    1      5m
configmap/v1-kube-prometheus-stack-namespace-by-workload               1      5m
configmap/v1-kube-prometheus-stack-node-cluster-rsrc-use               1      5m
configmap/v1-kube-prometheus-stack-node-rsrc-use                       1      5m
configmap/v1-kube-prometheus-stack-nodes                               1      5m
configmap/v1-kube-prometheus-stack-nodes-darwin                        1      5m
configmap/v1-kube-prometheus-stack-persistentvolumesusage              1      5m
configmap/v1-kube-prometheus-stack-pod-total                           1      5m
configmap/v1-kube-prometheus-stack-prometheus                          1      5m
configmap/v1-kube-prometheus-stack-proxy                               1      5m
configmap/v1-kube-prometheus-stack-scheduler                           1      5m
configmap/v1-kube-prometheus-stack-workload-total                      1      5m
```
